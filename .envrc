# --- .envrc (bash/zsh) ---

# Allow per-machine override without committing it
if [[ -f .envrc.local ]]; then
  source_env .envrc.local
fi

# Default base if not overridden
: "${UV_VENVS_BASE:=$HOME/.cache/uv-venvs}"

# Make sure the base exists
mkdir -p "$UV_VENVS_BASE" 

# Use the folder name (basename of current working directory)
_proj_name="$(basename "$PWD")"

# Final environment path lives on your chosen filesystem
export UV_PROJECT_ENVIRONMENT="$UV_VENVS_BASE/${_proj_name}"

# Optionally put the env's bin on PATH so `python`, `pip`, etc. resolve there
# if [[ -d "$UV_PROJECT_ENVIRONMENT/bin" ]]; then
#   PATH_add "$UV_PROJECT_ENVIRONMENT/bin"
# fi

# (Optional) Force copy mode to avoid cross-device link warnings
# export UV_LINK_MODE=copy

# (Optional) Handy alias to opt into using the active env
alias uva='uv --active'
source /h/jacobtian/.local/slurm/23.11.9/env.sh